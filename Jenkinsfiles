pipeline{
    agent any
	environment { 
        CC = 'clang'
    }
	parameters {
        string(name: 'PERSON', defaultValue: 'Mr Jenkins', description: 'Who should I say hello to?')
    }
    stages {
        stage('Build') {
            steps{
                echo 'This is a build step' 
				script{
				     mavenHome = tool 'M3'
                     sh "${mavenHome}/bin/mvn -v"
				}
            }
        }
        stage('Test') {
            steps{
                echo 'This is a test step'  
				echo "${env.CC}"
				echo "Hello ${params.PERSON}"
            }
        }
        stage('Deploy') {
            steps{
                echo 'This is a deploy step'    
				sh 'echo $CC'
            }
        }
    }
	post {
		always{
			echo 'I will always say Hello again!'
		}
	}
}
